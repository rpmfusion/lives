From bb7e9d2fe3f16db93b8ab005f6a4f0f19269800e Mon Sep 17 00:00:00 2001
From: Nicolas Chauvet <kwizart@gmail.com>
Date: Tue, 10 Mar 2020 11:11:21 +0100
Subject: [PATCH] Switch to opencv2+ COLOR_RGB2GRAY and related

Signed-off-by: Nicolas Chauvet <kwizart@gmail.com>
---
 lives-plugins/weed-plugins/farneback_analyser.cpp | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/lives-plugins/weed-plugins/farneback_analyser.cpp b/lives-plugins/weed-plugins/farneback_analyser.cpp
index c67c1417..5b8cd384 100644
--- a/lives-plugins/weed-plugins/farneback_analyser.cpp
+++ b/lives-plugins/weed-plugins/farneback_analyser.cpp
@@ -157,26 +157,26 @@ static weed_error_t farneback_process(weed_plant_t *inst, weed_timecode_t tc) {
   switch (palette) {
   case WEED_PALETTE_RGB24:
     srcMat = Mat(height, width, CV_8UC3, src, irow);
-    cvtColor(srcMat, *cvgrey, CV_RGB2GRAY); // may segfault here, not sure what causes it. Bug in opencv 2.4 ?
+    cvtColor(srcMat, *cvgrey, COLOR_RGB2GRAY); // may segfault here, not sure what causes it. Bug in opencv 2.4 ?
     break;
   case WEED_PALETTE_BGR24:
     srcMat = Mat(height, width, CV_8UC3, src, irow);
-    cvtColor(srcMat, *cvgrey, CV_BGR2GRAY);
+    cvtColor(srcMat, *cvgrey, COLOR_BGR2GRAY);
     break;
   case WEED_PALETTE_RGBA32:
     srcMat = Mat(height, width, CV_8UC4, src, irow);
-    cvtColor(srcMat, *cvgrey, CV_RGB2GRAY);
+    cvtColor(srcMat, *cvgrey, COLOR_RGB2GRAY);
     break;
   case WEED_PALETTE_BGRA32:
     srcMat = Mat(height, width, CV_8UC4, src, irow);
-    cvtColor(srcMat, *cvgrey, CV_BGR2GRAY);
+    cvtColor(srcMat, *cvgrey, COLOR_BGR2GRAY);
     break;
   case WEED_PALETTE_ARGB32: {
     int from_to[] = {0, 3, 1, 0, 2, 1, 3, 2}; // convert argb to rgba
     srcMat = Mat(height, width, CV_8UC4, src, irow);
     mixMat = Mat(height, width, CV_8UC4);
     mixChannels(&srcMat, 1, &mixMat, 1, from_to, 4);
-    cvtColor(mixMat, *cvgrey, CV_RGB2GRAY);
+    cvtColor(mixMat, *cvgrey, COLOR_RGB2GRAY);
   }
   break;
   case WEED_PALETTE_YUVA4444P:
-- 
2.24.1

